{% extends "base.html" %}

{% block content %}
{% load staticfiles %}


<div class="container mt-3">
    <h1>{{ project.nom }}</h1>
    <small>Published on {{ project.publication_date|date:"F d, Y" }}</small>
    <hr>

    <div class="my-3">
        <small>Funds raised</small>
        <div class="progress">
            {% widthratio project.financement project.montant 100 as width%}
            <div class="progress-bar" style="width:{{ width }}%">{{ width }}%</div>
        </div>
    </div>
    <hr>

    <div class="row mt-3">
        <div class="col-sm">
            <p class="lead">{{ project.description }}</p>
        </div>
        <div class="col-3">
            <p class="lead">Montant : {{ project.montant }} â‚¬</p>
        </div>
    </div>
    <div class="row mb-5">
        <div class="col-sm">
            <small><img src="{% static 'img/copyright_logo.png' %}">
                {{ project.copyright.nom }}</small>
        </div>
        <div class="col-3">
            <hr>
            <p>Membres du projet :</p>
            {% for membre in project.membres.all %}
            <p class="ml-3">{{ membre.first_name }} {{ membre.last_name }}</p>
            {% endfor %}
        </div>
    </div>

    <hr>
    <div class="mt-4">
        <p class="font-weight-light">Commentaires :</p>
        <form class="form" action="" role="form" method="post">
            {% csrf_token %}
            <div class="form-group">
                <textarea id="contentInput" name="content" placeholder="Comment" class="form-control form-control-sm"
                       required=""></textarea>
            </div>
            <div class="form-group">
                <input type="submit" class="btn btn-primary btn-block" value="Submit"/>
            </div>
        </form>
    </div>
    <div class="list-group mb-3">
        {% for comment in comments %}
        <div class="list-group-item">
            <div class="d-flex justify-content-between">
                <h5 class="mb-1">{{ comment.utilisateur.first_name }} {{ comment.utilisateur.last_name }} :</h5>
                <small>{{ comment.publication_date|date:"d F Y, G:i" }}</small>
            </div>
            <p class="mb-1 pr-5">{{ comment.content|linebreaksbr }}</p>
        </div>
        {% endfor %}
    </div>


</div>
</div>


{% endblock %}